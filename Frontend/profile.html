<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <link rel="stylesheet" href="css/master.css">
    <link rel="stylesheet" href="css/home.css">

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@next"></script>
</head>

<style>
    .add,
    .remove {
        margin-right: 5px;
        padding-top: 5px;
    }

    #formfield,
    #textbox,
    #formfield2,
    #textbox2 {
        margin-bottom: 5px;
    }

    .img-fluid {
        display: block;
        margin-left: auto;
        margin-right: auto;
        max-width: 50%;
    }

    .border-right {
        border-right: 1px solid #dee2e6 !important;
    }

    .profilepic {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 200px;    
        z-index: 1000;
        margin-top: -100px;  
        }



    .banner {
        color: #ffffff; /* Text color */
        /* padding: 20px; */
        text-align: center;
        height: 200px;
        background-color: #DE352A;
    }

    h2 {
        margin-top: -10px;
    }

    .username {
        font-size: 30px;
    }

</style>

<body>

    <div id="app">

        <app-nav></app-nav>

        <div class="banner">
        </div>
       
        <img src="img/icon/food.png" alt="logo" class="profilepic mx-auto" /><br>
        <div class="text-center"><h2>Welcome back,</h2></div><br>
        <div class="username text-center">Paul B. Madhavan</div>

        <div class="mt-5 mb-5 text-center"><button class="btn rounded btn-danger shadow-sm" style='font-weight:lighter' type="button">Edit Profile</button></div>

        <div id="section6 p-3">
            <div class="section-head p-3 bg-light">
              <h3>Recipes <span class="red">Shared</span></h3>
            </div>
        </div>
       
    </div>
    <app-footer></app-footer>

    <!-- script for recipe listing -->
    <script>
         app.component('recipe-listing', {
      props: {
        recipe: {
          type: Array,
          required: true
        }
      },
      data(){
        return{
          localrecipe:[],
        }
      },
      computed:{
        recipeData() {
          return this.localrecipe;
        }
      },
      template: listing.template ,  
    created() {
    // This code is executed when the component is created.
    
    // Example Axios GET request
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token');
  
    const id = urlParams.get('id');
    // to add in session logic
    const headers = {
    Authorization: token,
    };

    //to add in logic to get user diet
    axios.get('https://leaptron2.dscloud.me:3000/api/recipe/random?limit=3&readyInMinutes=700&diet=',{
      headers: headers
    })
      .then(response => {
        console.log(response)
        // Assuming the response contains recipe data
        this.localrecipe = response.data
      })
      .catch(error => {
        console.error('Error:', error);
      }); 
  }
    });


    app.component('fastrecipe-listing', {
      props: {
        recipe: {
          type: Array,
          required: true
        }
      },
      data(){
        return{
          fastrecipe:[],
        }
      },
      computed:{
        recipeData() {
          return this.fastrecipe;
        }
      },
      template: listing.template ,  
    created() {
    // This code is executed when the component is created.
    
    // Example Axios GET request
    const urlParams = new URLSearchParams(window.location.search);
    const token = urlParams.get('token');
  
    const id = urlParams.get('id');
    // to add in session logic
    const headers = {
    Authorization: token,
    };

      axios.get('https://leaptron2.dscloud.me:3000/api/recipe/random?limit=3&readyInMinutes=30&diet=',{
      headers: headers
    })
      .then(response => {
        console.log(response)
        // Assuming the response contains recipe data
        this.fastrecipe = response.data
      })
      .catch(error => {
        console.error('Error:', error);
      });
  }
    });

  
    function createIndex() {
      let index = [];
      for (let i = 1; i < 4; i++) {
        index.push({ ind: '#' + i });
      }
      return index;
    }
    </script>

    <!-- script for image preview -->
    <script>
        function preview() {
            frame.src = URL.createObjectURL(event.target.files[0]);
        }
        function clearImage() {
            document.getElementById('formFile').value = null;
            frame.src = "";
        }
    </script>


    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script src="component/navbar.js"></script>
    <script src="component/listing.js"></script>
    <script src="component/footer.js"></script>

    <script>
        const app = Vue.createApp({});
        app.component('app-nav', navbar);
        app.component('app-listing', listing);
        app.component('app-footer', footer);
        app.mount('#app');

        gsap.from("#countRecipe", {
            textContent: 0,
            duration: 4,
            ease: "power1.in",
            snap: { textContent: 1 }
        });

        const buttons = document.querySelectorAll(".topRecipe");

        buttons.forEach(function (button) {
            button.addEventListener("click", function () {
                buttons.forEach(function (btn) {
                    btn.classList.remove("btn-danger");
                    btn.classList.add("btn-outline-secondary");

                    var rmv = document.getElementById(btn.getAttribute("data-value"));
                    rmv.style.display = 'none';
                });

                var content = document.getElementById(event.target.getAttribute("data-value"));
                content.style.display = 'block';
            });
        });

    </script>
</body>

</html>