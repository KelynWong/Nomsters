<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Recipe</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

  <link rel="stylesheet" href="css/master.css">
  <link rel="stylesheet" href="css/recipe.css">

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script src="https://unpkg.com/vue@next"></script>
</head>

<div id="app">
    <app-nav></app-nav>
    <h2>All Recipes</h2>
    <div class="content">
        <div class="dropdown d-flex justify-content-end">
            <button class="btn dropdown-toggle border border-secondary" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            Sort by
            </button>
            <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
            </ul>
        </div>

        <div class="results">
            <div class="filter">

            </div>
            <div class="container-listing-wrap">
                <recipe-listing :recipe="indexes"></recipe-listing>
                <!-- <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing>
                <app-listing></app-listing> -->
            </div>
        </div>
    </div>
    <app-footer></app-footer>
</div>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<script src="component/navbar.js"></script>
<script src="component/listing.js"></script>
<script src="component/footer.js"></script>

<script>
const app = Vue.createApp({
    data() {
        return {
            indexes: createIndex()
        };
    }
});
app.component('app-nav', navbar);
// app.component('app-listing', listing);
app.component('app-footer', footer);
app.component('recipe-listing', {
    data() {
        return {
            pageNumber: 1
        }
    },
    props: {
        recipe: {
            type: Array,
            required: true
        },
        size: {
            type: Number,
            required: false,
            default: 12
        }
    },
    methods:{
        nextPage() {
           this.pageNumber++;
        },
        prevPage() {
          this.pageNumber--;
        }
    },
    computed: {
        pageCount() {
            let l = this.recipe.length;
            let s = this.size;
            return Math.ceil(l/s);
        },
        recipeData() {
            const start = this.pageNumber * this.size - this.size;
            const end = start + this.size;
            return this.recipe.slice(start, end);
        }
    },
    template: listing.template + `
        
        <div class="m-4">
            <button type="button" class="btn btn-sm m-1" v-if="pageNumber > 1" @click="prevPage"> << </button>
            <button type="button" class="btn btn-sm m-1 rounded-circle" :class="{ 'btn-dark': pageNumber === page }" v-for="page in pageCount" @click="pageNumber = page"> {{ page }}
            </button>
            <button type="button" class="btn btn-sm m-1" v-if="pageNumber < pageCount" @click="nextPage"> >> </button>
        </div>
    `
});
  
      /* <button 
            :disabled="pageNumber === 0" 
            @click="prevPage">
            Previous
        </button>
        <button 
            :disabled="pageNumber >= pageCount -1" 
            @click="nextPage">
            Next
        </button> */
function createIndex(){
    let index = [];
    for(let i = 1; i < 100; i++){
        index.push({ind:'#' + i});
    }
    return index;
}

app.mount('#app');

</script>
</body>

</html>